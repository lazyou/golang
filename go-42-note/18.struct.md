## 18.1 结构体(struct)
* 结构体是 __复合类型（composite types）__，它由一系列属性组成，每个属性都有自己的类型和值的，结构体通过属性把数据聚集在一起。

* 结构体类型和字段的命名遵循可见性规则

* 结构体是值类型，因此可以通过 `new` 函数来创建

* 字段名称可以显式指定（IdentifierList）或隐式指定（EmbeddedField）
    * 没有显式字段名称的字段称为匿名（内嵌）字段
    
* 使用
```go
t := new(T) // 变量 t 是一个指向 T的指针，此时结构体字段的值是它们所属类型的零值;
var t T // 也会给 t 分配内存，并零值化内存，但是这个时候 t 是类型T.

// 在这两种方式中，t 通常被称做类型 T 的一个实例（instance）或对象（object）
```


## 18.2 结构体特性
* 结构体的内存布局 Go 语言中， __结构体和它所包含的数据在内存中是以连续块的形式存在的__，即使结构体中嵌套有其他的结构体，这在性能上带来了很大的优势。

* __递归结构体__ 结构体类型可以通过引用自身（指针类型）来定义。这在定义链表或二叉树的节点时特别有用，此时节点包含指向临近节点的链接。
    ```go
    type H struct {
        int
        *H
    }
    ```

* 使用工厂方法 通过参考应用可见性规则，我们可以设定结构体名不能导出，就可以达到使用 new 函数，强制使用工厂方法的目的:
```go
type matrix struct {
    ...
}

func NewMatrix(params) *matrix {
    m := new(matrix) // 初始化 m
    return m
}

// 在包外，只有通过NewMatrix函数才可以初始化matrix 结构。
```

* 带标签的结构体
    * 标签的内容不可以在一般的编程中使用，只有 reflect 包能获取它


## 18.3 匿名成员
* Go语言结构体中可以包含一个或多个匿名（内嵌）字段，即这些字段没有显式的名字，只有字段的类型是必须的，__此时类型就是字段的名字__
    * 这一特征决定了在一个结构体中，每种数据类型只能有一个匿名字段
    
* eg: 18/anonymous_struct.go    


## 18.4 嵌入与聚合
* 结构体中包含匿名（内嵌）字段叫 __嵌入__ 或者 __内嵌__

* 而如果结构体中字段包含了类型名，还有字段名，则是 __聚合__

* 多看几遍例子:
    ```go
    type Human struct {
        name string
    }
    
    type Person1 struct {           // 内嵌（更像平级关系）
        Human
    }
    
    type Person2 struct {           // 内嵌， 这种内嵌与上面内嵌有差异
        *Human
    }
    
    type Person3 struct{             // 聚合(更像从属关系)
        human Human
    }
    ```

* Go语言中如果只考虑结构体和接口的嵌入组合方式，一共有下面四种：
    1. 在接口中嵌入接口；
    2. 在接口中嵌入结构体 （不合法的，不能通过编译）;
    3. 在结构体中内嵌接口 (初始化的时候，内嵌接口要用一个实现此接口的结构体赋值；或者定义一个新结构体，可以把新结构体作为receiver，实现接口的方法就实现了接口);
    4. 在结构体中嵌入结构体 (嵌入自身的指针类型即递归嵌套); 


## 8.5 命名冲突
* 当两个字段拥有相同的名字（可能是继承来的名字）时该怎么办呢？外层名字会覆盖内层名字（但是两者的内存空间都保留）。
    